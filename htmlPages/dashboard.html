<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Solar Tracker Dashboard</title>
    <link rel="icon" href="data:;base64,=" />
    <link rel="stylesheet" href="dashboard.css" />
  </head>
  <body>
    <header class="topbar">
      <div>
        <h1>Solar Tracker</h1>
        <p class="subtitle">Realtime bediening & status</p>
      </div>
    </header>

    <main class="layout dashboard-layout">
      <section class="card span-1 status-sidebar">
        <div class="card-header">
          <h2>Status</h2>
        </div>
        <div class="status-board">
          <div class="panel status-panel">
            <h3>Connectiviteit</h3>
            <div class="status-list">
              <div><span>WiFi</span><span id="Wifi_connected" class="dot red"></span></div>
              <div><span>MQTT</span><span id="Mqtt_connected" class="dot red"></span></div>
              <div><span>Data</span><span id="Data_freshness" class="dot red"></span></div>
              <div><span>Laatste update</span><span id="Last_update" class="badge-time">--:--:--</span></div>
              <div><span>Settings</span><span id="colorSquareHeader" class="unlock-dot"></span></div>
            </div>
          </div>

          <div class="panel status-panel alarms-panel">
            <h3>Alarms</h3>
            <div class="status-list">
              <div><span>Draaien te lang</span><span id="Draaien_too_long" class="dot neutral"></span></div>
              <div><span>Kantelen te lang</span><span id="Kantelen_too_long" class="dot neutral"></span></div>
              <div><span>Reset happened</span><span id="reset" class="dot neutral"></span></div>
            </div>
            <div class="alarm-actions">
              <button id="resetAlarmsBtn" class="btn btn-soft">Reset alarms</button>
              <div id="alarmLog" class="alarm-console">[init] Console klaar voor alarm events...</div>
            </div>
          </div>

          <div class="panel status-panel">
            <h3>Modes</h3>
            <div class="mode-grid">
              <div class="mode-chip"><span>Night</span><span id="NIGHT_MODE" class="dot neutral"></span></div>
              <div class="mode-chip"><span>Stop</span><span id="STOP_MODE" class="dot neutral"></span></div>
              <div class="mode-chip"><span>Force</span><span id="FORCE_MODE" class="dot neutral"></span></div>
              <div class="mode-chip"><span>Test</span><span id="TEST_MODE" class="dot neutral"></span></div>
              <div class="mode-chip"><span>Safe</span><span id="SAFE_MODE" class="dot neutral"></span></div>
            </div>
          </div>
        </div>
      </section>

      <section class="card span-1 position-section">
        <div class="card-header">
          <h2>Positie bediening</h2>
        </div>
        <div class="command-layout">
          <div class="panel goto-card">
            <h3>Draaien</h3>
            <div class="position-readout">
              <div class="position-track">
                <div id="Draaien-Positie_Fill" class="position-fill"></div>
              </div>
              <strong id="Draaien-Positie_Percentage">0%</strong>
            </div>
            <div class="row">
              <input type="number" id="Draaien-Positie_Input" placeholder="0 - 100%" min="0" max="100" step="0.01" />
              <button id="Draaien-Positie_Btn" class="btn btn-primary">Ga</button>
            </div>
            <div class="preset-row" data-target-input="Draaien-Positie_Input" data-target-btn="Draaien-Positie_Btn">
              <button type="button" class="btn btn-soft" data-preset="0">0%</button>
              <button type="button" class="btn btn-soft" data-preset="25">25%</button>
              <button type="button" class="btn btn-soft" data-preset="50">50%</button>
              <button type="button" class="btn btn-soft" data-preset="75">75%</button>
              <button type="button" class="btn btn-soft" data-preset="100">100%</button>
            </div>
          </div>

          <div class="panel goto-card">
            <h3>Kantelen</h3>
            <div class="position-readout">
              <div class="position-track">
                <div id="Kantelen-Positie_Fill" class="position-fill"></div>
              </div>
              <strong id="Kantelen-Positie_Percentage">0%</strong>
            </div>
            <div class="row">
              <input type="number" id="Kantelen-Positie_Input" placeholder="0 - 100%" min="0" max="100" step="0.01" />
              <button id="Kantelen-Positie_Btn" class="btn btn-primary">Ga</button>
            </div>
            <div class="preset-row" data-target-input="Kantelen-Positie_Input" data-target-btn="Kantelen-Positie_Btn">
              <button type="button" class="btn btn-soft" data-preset="0">0%</button>
              <button type="button" class="btn btn-soft" data-preset="25">25%</button>
              <button type="button" class="btn btn-soft" data-preset="50">50%</button>
              <button type="button" class="btn btn-soft" data-preset="75">75%</button>
              <button type="button" class="btn btn-soft" data-preset="100">100%</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card span-1 sensors-section">
        <div class="card-header">
          <h2>Sensors</h2>
        </div>
        <div class="sensor-layout">
          <article class="sensor-panel">
            <div class="sensor-spatial-grid">
              <div class="sensor-card pos-lb">
                <div class="sensor-head"><strong>LB</strong><span id="lb">-</span></div>
                <div class="sensor-level-track"><div id="lbLevel" class="sensor-level-fill"></div></div>
              </div>
              <div class="sensor-card pos-rb">
                <div class="sensor-head"><strong>RB</strong><span id="rb">-</span></div>
                <div class="sensor-level-track"><div id="rbLevel" class="sensor-level-fill"></div></div>
              </div>
              <div class="sensor-card pos-lo">
                <div class="sensor-head"><strong>LO</strong><span id="lo">-</span></div>
                <div class="sensor-level-track"><div id="loLevel" class="sensor-level-fill"></div></div>
              </div>
              <div class="sensor-card pos-ro">
                <div class="sensor-head"><strong>RO</strong><span id="ro">-</span></div>
                <div class="sensor-level-track"><div id="roLevel" class="sensor-level-fill"></div></div>
              </div>
              <div class="sensor-spatial-center" id="sensorLevel">
                <div class="sensor-level-ring"></div>
                <div class="sensor-level-center"></div>
                <div class="sensor-level-bubble" id="sensorLevelBubble"></div>
              </div>
            </div>
          </article>

          <!-- <article class="sensor-panel">
            <div class="cross-balance-combined">
              <div class="cross-value top"><strong id="topCombinedValue">-</strong></div>
              <div class="cross-value right"><strong id="rightCombinedValue">-</strong></div>
              <div class="cross-value bottom"><strong id="bottomCombinedValue">-</strong></div>
              <div class="cross-value left"><strong id="leftCombinedValue">-</strong></div>

              <div class="cross-horizontal-track">
                <div id="leftBalanceFill" class="cross-horizontal-fill left"></div>
                <div id="rightBalanceFill" class="cross-horizontal-fill right"></div>
              </div>

              <div class="cross-vertical-track">
                <div id="topBalanceFill" class="cross-vertical-fill top"></div>
                <div id="bottomBalanceFill" class="cross-vertical-fill bottom"></div>
              </div>

              <div class="cross-center-line-horizontal"></div>
              <div class="cross-center-line-vertical"></div>
            </div>
          </article> -->
        </div>
      </section>

      <section class="card span-2 movement-section">
        <div class="card-header">
          <h2>Movement control</h2>
          <button id="StopButton" class="btn btn-stop">STOP</button>
        </div>
        <div class="movement-grid">
          <article class="movement-card">
            <h3>Links</h3>
            <div class="status-list compact">
              <div><span>Active</span><span id="LEFT_Active" class="dot neutral"></span></div>
              <div><span>Sensors</span><span id="LEFT_Sensors" class="dot neutral"></span></div>
              <div><span>End</span><span id="LEFT_End" class="dot neutral"></span></div>
              <div><span>Antipendel</span><span id="LEFT_Antipendel" class="dot neutral"></span></div>
              <div><span>Alarm</span><span id="LEFT_Alarm" class="dot neutral"></span></div>
              <div><span>Force</span><span id="LEFT_Force" class="dot neutral"></span></div>
            </div>
            <button class="btn btn-force" data-force-id="LEFT_Force">FORCE</button>
          </article>

          <article class="movement-card">
            <h3>Rechts</h3>
            <div class="status-list compact">
              <div><span>Active</span><span id="RIGHT_Active" class="dot neutral"></span></div>
              <div><span>Sensors</span><span id="RIGHT_Sensors" class="dot neutral"></span></div>
              <div><span>End</span><span id="RIGHT_End" class="dot neutral"></span></div>
              <div><span>Antipendel</span><span id="RIGHT_Antipendel" class="dot neutral"></span></div>
              <div><span>Alarm</span><span id="RIGHT_Alarm" class="dot neutral"></span></div>
              <div><span>Force</span><span id="RIGHT_Force" class="dot neutral"></span></div>
            </div>
            <button class="btn btn-force" data-force-id="RIGHT_Force">FORCE</button>
          </article>

          <article class="movement-card">
            <h3>Onder</h3>
            <div class="status-list compact">
              <div><span>Active</span><span id="IN_Active" class="dot neutral"></span></div>
              <div><span>Sensors</span><span id="IN_Sensors" class="dot neutral"></span></div>
              <div><span>End</span><span id="IN_End" class="dot neutral"></span></div>
              <div><span>Antipendel</span><span id="IN_Antipendel" class="dot neutral"></span></div>
              <div><span>Alarm</span><span id="IN_Alarm" class="dot neutral"></span></div>
              <div><span>Force</span><span id="IN_Force" class="dot neutral"></span></div>
            </div>
            <button class="btn btn-force" data-force-id="IN_Force">FORCE</button>
          </article>

          <article class="movement-card">
            <h3>Boven</h3>
            <div class="status-list compact">
              <div><span>Active</span><span id="OUT_Active" class="dot neutral"></span></div>
              <div><span>Sensors</span><span id="OUT_Sensors" class="dot neutral"></span></div>
              <div><span>End</span><span id="OUT_End" class="dot neutral"></span></div>
              <div><span>Antipendel</span><span id="OUT_Antipendel" class="dot neutral"></span></div>
              <div><span>Alarm</span><span id="OUT_Alarm" class="dot neutral"></span></div>
              <div><span>Force</span><span id="OUT_Force" class="dot neutral"></span></div>
            </div>
            <button class="btn btn-force" data-force-id="OUT_Force">FORCE</button>
          </article>
        </div>
      </section>

      <section class="card span-2 diagnostics-section">
        <div class="card-header">
          <h2>Advanced diagnostics</h2>
        </div>
        <details class="diagnostics-toggle">
          <summary>Timers</summary>
          <div class="timer-grid" id="timerGrid"></div>
        </details>
      </section>

      <section class="card span-2 security-section">
        <div class="card-header">
          <h2>Security</h2>
        </div>
        <div class="panel security-panel">
          <div class="unlock-row">
            <input id="unlockInput" type="text" placeholder="Unlock code" />
            <button id="unlockBtn" class="btn btn-primary">UNLOCK</button>
            <span id="colorSquare" class="unlock-dot"></span>
          </div>
        </div>
      </section>

      <section class="card span-2 settings-section">
        <div class="card-header">
          <h2>Instellingen</h2>
        </div>
        <div class="settings-grid">
          <label>
            <span>LB Offset</span>
            <div class="row"><input id="LB_Offset" type="number" /><button class="btn btn-primary" data-setting-key="LB_Offset">Opslaan</button></div>
          </label>
          <label>
            <span>RB Offset</span>
            <div class="row"><input id="RB_Offset" type="number" /><button class="btn btn-primary" data-setting-key="RB_Offset">Opslaan</button></div>
          </label>
          <label>
            <span>LO Offset</span>
            <div class="row"><input id="LO_Offset" type="number" /><button class="btn btn-primary" data-setting-key="LO_Offset">Opslaan</button></div>
          </label>
          <label>
            <span>RO Offset</span>
            <div class="row"><input id="RO_Offset" type="number" /><button class="btn btn-primary" data-setting-key="RO_Offset">Opslaan</button></div>
          </label>
          <label>
            <span>Licht marge</span>
            <div class="row"><input id="lichtMarge" type="number" /><button class="btn btn-primary" data-setting-key="licht_marge" data-input-id="lichtMarge">Opslaan</button></div>
          </label>
        </div>
      </section>
    </main>

    <footer>Solar Tracker dashboard v2</footer>

    <script src="dashboard.config.js"></script>
    <script src="dashboard.ui.js"></script>
    <script src="dashboard.api.js"></script>
    <script src="dashboard.mqtt.js"></script>
    <script src="dashboard.main.js"></script>
  </body>
</html>
